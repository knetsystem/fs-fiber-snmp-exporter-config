modules:
  fs_fiber:
    walk:
      # --- Port Identification ---
      - FS-FIBER-MIB::fsFiberPortDescr

      # --- Core Optical Power (SFP / SFP+) ---
      - FS-FIBER-MIB::fsFiberDDMSupportStatus
      - FS-FIBER-MIB::fsFiberTXpowerIntegerpart
      - FS-FIBER-MIB::fsFiberTXpowerDecimalpart
      - FS-FIBER-MIB::fsFiberTXpowerStatus
      - FS-FIBER-MIB::fsFiberRXpowerIntegerpart
      - FS-FIBER-MIB::fsFiberRXpowerDecimalpart
      - FS-FIBER-MIB::fsFiberRXpowerStatus

      # --- Temperature & Voltage ---
      - FS-FIBER-MIB::fsFiberTemp
      - FS-FIBER-MIB::fsFiberTempStatus
      - FS-FIBER-MIB::fsFiberVoltageStatus

      # --- Bias Current ---
      - FS-FIBER-MIB::fsFiberBiasStatus

      # --- Interface Description ---
      - IF-MIB::ifAlias

    max_repetitions: 50
    retries: 3
    timeout: 10s

    lookups:
      - source_indexes: [fsFiberPortIndex]
        lookup: fsFiberPortDescr
        drop_source_indexes: true

      - source_indexes: [fsFiberPortIndex]
        lookup: IF-MIB::ifAlias
        drop_source_indexes: false

    overrides:
      FS-FIBER-MIB::fsFiberTempStatus:     { type: EnumAsStateSet }
      FS-FIBER-MIB::fsFiberVoltageStatus:  { type: EnumAsStateSet }
      FS-FIBER-MIB::fsFiberBiasStatus:     { type: EnumAsStateSet }
      FS-FIBER-MIB::fsFiberRXpowerStatus:  { type: EnumAsStateSet }
      FS-FIBER-MIB::fsFiberTXpowerStatus:  { type: EnumAsStateSet }

      # Optional: keep the label via lookup, but don't emit separate series
      fsFiberPortIndex: { ignore: true }
      fsFiberPortDescr: { ignore: true }

